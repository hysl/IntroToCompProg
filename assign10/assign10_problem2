# Helen Li
# May 6, 2015
# Assignment #10, Part #2

import random
import urllib.request

thesaurus = {}

# where should we obtain data from?
url = "http://cims.nyu.edu/~kapp/courses/cs0002spring2015/assignments/assignment10/python_asg10_Roget_Thesaurus.txt"

# initiate request to URL
response = urllib.request.urlopen(url)

# read data from URL as a string
data = response.read().decode('utf-8')

# split by line break
splitlines = data.split("\n")

for lines in splitlines:
    # split by comma
    # first word is key, the rest are values
    splitwords = lines.split(",")
    first = str.lower(splitwords[0])
    # create a list for keys
    thesaurus[first] = []

    # add vales to keys
    for words in range(1, len(splitwords)):
        thesaurus[first].append(str.lower(splitwords[words]))


print ("Total words in thesaurus:", len(splitlines))
print ()

# convert phrase to lower case
phrase = str.lower(input("Enter a phrase: "))

# split phrase by space
splitphrase = phrase.split(" ")


for word in splitphrase:
    newword = ""

    # only record alphabets
    for c in word:
        if c.isalpha():
            newword = newword + c

    # if word in thesaurus, randomly choose a synonym
    # else print word
    if newword in thesaurus:
        a = random.randint(1, len(thesaurus[newword]))
        print (str.upper(thesaurus[newword][a-1]), end=" ")
    else:
        print (newword, end=" ")
